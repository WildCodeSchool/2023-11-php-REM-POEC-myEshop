{% extends 'layout.html.twig' %}
{% block title %}Home Page{% endblock %}
{% block stylesheets %}
	{{ parent() }}
{% endblock %}

{% block content %}

	<div id="carouselExampleAutoplaying" class="carousel slide p-0 m-0" data-bs-ride="carousel" style="margin: 10px;">
		<div class="carousel-inner">
			<div class="carousel-item active">			
				<img src="/assets/images/jjk.jpg" class="d-block w-100 rounded" alt="..." style="height:40vh;">
			</div>
			<div class="carousel-item">
				<img src="/assets/images/gojo.jpg" class="d-block w-100 rounded" alt="..." style="height:40vh;">
			</div>
			<div class="carousel-item">
				<img src="/assets/images/marvel comics.webp" class="d-block w-100 rounded" alt="..." style="height:40vh;">
			</div>
			<div class="carousel-item">
				<img src="/assets/images/comics2.jpg" class="d-block w-100 rounded" alt="..." style="height:40vh;">
			</div>
		</div>
		<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="visually-hidden">Previous</span>
		</button>
		<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="visually-hidden">Next</span>
		</button>
	</div>

	<div class="container-fluid d-flex justify-content-center align-items-center text-white">
		{% for res in resultats %}
			<aside class="news col-12 col-md-3">
				<div class="card mb-4">
					<img src="chemin/vers/image.jpg" class="card-img-top" alt="Image de l'article">
					<div class="card-body">
						<h5 class="card-title">Titre de l'article</h5>
						<p class="card-text">Résumé de l'article ou description courte.</p>
						<a href="#" class="btn btn-primary">Lire l'article</a>
					</div>
				</div>
			</aside>
		{% endfor %}
	</div>
	<div style="background-color:black;" class="container text-center my-3 col-12 col-md-9 py-4 px-5 border border-primary shadow-lg">
		<h2 class="text-primary text-center fw-bold bg-white my-3 col-12 col-md-5 mx-auto border shadow-sm">Nos meilleurs ventes</h2>
		<div class="row mx-auto my-auto justify-content-center">
			<div id="recipeCarousel" class="carousel carousel2 slide" data-bs-ride="carousel">
				<div class="carousel-inner" role="listbox">
					{% for product in products %}
						<a href="/product/show?id={{product.id}}">
							<div class="carousel-item2 carousel-item{% if loop.first %} active{% endif %}">
								<div class="col-md-6 col-lg-4 col-xl-3 col-12">
									<div class="card">
										<div class="card-img">
											<img style="object-fit: cover !important; object-position: center top!important; height: 300px !important;" src="{{ product.illustration }}" class="img-fluid d-block w-100" alt="{{ product.name }}">
										</div>
										<div class="card-img-overlay fw-bold fs-2">
											<h2 style="background-color:crimson;" class="card-title text-white p-2 border-bottom-1 shadow-lg fw-bold">{{ product.name }}</h2>
											<div class="d-flex justify-content-center align-items-end">
												<h2 class="badge bg-success rounded text-white fw-bolder py-2 px-4 mt-4">{{ (product.price/100)|number_format(2,",",".") }}€</h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</a>
					{% endfor %}
				</div>
				<a class="carousel-control-prev bg-transparent w-auto" href="#recipeCarousel" role="button" data-bs-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				</a>
				<a class="carousel-control-next bg-transparent w-auto" href="#recipeCarousel" role="button" data-bs-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
				</a>
			</div>
		</div>
	</div>


	{% block javascripts %}

		<script>
			let items = document.querySelectorAll('.carousel2 .carousel-item2')
			items.forEach((el) => {
				const minPerSlide = 6
				let next = el.nextElementSibling
				for (var i = 1; i < minPerSlide; i++) {
					if (! next) {
					next = items[0]
				}

				let cloneChild = next.cloneNode(true)
				el.appendChild(cloneChild.children[0])
				next = next.nextElementSibling
			}
			});
		</script>
	{% endblock %}
{% endblock %}
